<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>SQL语言之完整性与安全性</title><meta name="description" content="Shifting eyes and vacancy coming."><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="重点与难点

数据库完整性的概念，完整性规则，静态约束，动态约束（触发器）
数据库安全性的概念，安全性访问规则，权利与授权

一. 数据库完整性的概念与分类
1. 数据库完整性的定义
数据库完整性（DB Integrity）是指DBMS应保证的DB的一种特性——在任何情况下的正确性、有效性和一致性。

广义完整性：语义完整性、并发控制、安全控制、DB故障恢复等；
狭义完整性：专指语义完整性，DBMS通常有专门完整性管理机制与程序来处理语义完整性问题（本讲专指）

关系模型中完整性要求：实体完整性、参照完整性、用户自定义完整性
数据库设计中，在E-R图/IDEF1X图中有很多完整性约束条件
2. 数据库完整性的问题
不正当的数据库操作，如输入错误、操作失误、程序处理失误等，会引发数据库完整性问题。
数据库完整.."><meta name="generator" content="Hexo 6.0.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">FuLucas's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">SQL语言之完整性与安全性</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80.-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%8C%E6%95%B4%E6%80%A7%E7%9A%84%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%88%86%E7%B1%BB"><span class="toc-text">一. 数据库完整性的概念与分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%8C%E6%95%B4%E6%80%A7%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-text">1. 数据库完整性的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%8C%E6%95%B4%E6%80%A7%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">2. 数据库完整性的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%9D%E8%AF%81%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="toc-text">3. 保证数据库完整性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%8C%E6%95%B4%E6%80%A7%E5%88%86%E7%B1%BB"><span class="toc-text">4. 数据库完整性分类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C.-%E5%88%A9%E7%94%A8-sql-%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E9%9D%99%E6%80%81%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="toc-text">二. 利用 SQL 语言实现数据库的静态完整性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sql%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E7%BA%A6%E6%9D%9F%E6%96%B9%E6%B3%95create-table"><span class="toc-text">1. SQL语言实现约束方法——Create Table</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#col_constr-%E5%88%97%E7%BA%A6%E6%9D%9F"><span class="toc-text">1.1 Col_constr 列约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#table_constr-%E8%A1%A8%E7%BA%A6%E6%9D%9F"><span class="toc-text">1.2 Table_constr 表约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F%E4%B8%AD%E7%9A%84check"><span class="toc-text">1.3 约束中的Check</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%92%A4%E9%94%80%E6%88%96%E8%BF%BD%E5%8A%A0%E7%BA%A6%E6%9D%9Falter-table"><span class="toc-text">1.4 撤销或追加约束——Alter Table</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sql%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E7%BA%A6%E6%9D%9F%E6%96%B9%E6%B3%95%E6%96%AD%E8%A8%80assertion"><span class="toc-text">2. SQL语言实现约束方法——断言ASSERTION</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89.-%E5%88%A9%E7%94%A8-sql-%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%8A%A8%E6%80%81%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="toc-text">三. 利用 SQL 语言实现数据库的动态完整性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8A%A8%E6%80%81%E5%AE%8C%E6%95%B4%E7%9A%84%E6%96%B9%E6%B3%95%E8%A7%A6%E5%8F%91%E5%99%A8trigger"><span class="toc-text">1. 实现数据库动态完整的方法——触发器Trigger</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B.-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E6%80%A7%E7%9A%84%E6%A6%82%E5%BF%B5%E5%8F%8A%E5%88%86%E7%B1%BB"><span class="toc-text">四. 数据库安全性的概念及分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E6%80%A7%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-text">1. 数据库安全性的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%87%AA%E4%B8%BB%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6"><span class="toc-text">2. 数据库的自主安全机制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%87%AA%E4%B8%BB%E5%AE%89%E5%85%A8%E6%80%A7%E8%AE%BF%E9%97%AE%E8%A7%84%E5%88%99"><span class="toc-text">2.1 数据库自主安全性访问规则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%A4%E7%A7%8D%E8%87%AA%E4%B8%BB%E5%AE%89%E5%85%A8%E6%80%A7%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="toc-text">2.2 两种自主安全性实现方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94.-%E5%88%A9%E7%94%A8-sql-%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%87%AA%E4%B8%BB%E5%AE%89%E5%85%A8%E6%80%A7"><span class="toc-text">五. 利用 SQL 语言实现数据库的自主安全性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sql%E8%AF%AD%E8%A8%80%E7%9A%84%E7%94%A8%E6%88%B7%E4%B8%8E%E6%9D%83%E5%88%A9"><span class="toc-text">1. SQL语言的用户与权利</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dcl%E5%91%BD%E4%BB%A4"><span class="toc-text">2. DCL命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%88%E6%9D%83%E5%91%BD%E4%BB%A4"><span class="toc-text">2.1 授权命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E5%9B%9E%E6%8E%88%E6%9D%83%E5%91%BD%E4%BB%A4"><span class="toc-text">2.2 收回授权命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD.-%E5%AE%89%E5%85%A8%E6%80%A7%E6%8E%A7%E5%88%B6%E7%9A%84%E5%85%B6%E4%BB%96%E7%AE%80%E4%BB%8B"><span class="toc-text">六. 安全性控制的其他简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E4%B8%BB%E5%AE%89%E5%85%A8%E6%80%A7%E7%9A%84%E6%8E%88%E6%9D%83%E8%BF%87%E7%A8%8B%E5%8F%8A%E5%85%B6%E9%97%AE%E9%A2%98"><span class="toc-text">1. 自主安全性的授权过程及其问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%BA%E5%88%B6%E5%AE%89%E5%85%A8%E6%80%A7%E6%9C%BA%E5%88%B6"><span class="toc-text">2. 强制安全性机制</span></a></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/Database-System"><i class="tag post-item-tag">Database-System</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">SQL语言之完整性与安全性</h1><time class="has-text-grey" datetime="2022-04-27T10:38:38.000Z">2022-04-27</time><article class="mt-2 post-content"><p><font color="red"><u><strong><em>重点与难点</em></strong></u></font></p>
<ul>
<li><font color="red"><strong><em>数据库完整性的概念，完整性规则，静态约束，动态约束（触发器）</em></strong></font></li>
<li><font color="red"><strong><em>数据库安全性的概念，安全性访问规则，权利与授权</em></strong></font></li>
</ul>
<h2 id="一.-数据库完整性的概念与分类">一. 数据库完整性的概念与分类</h2>
<h3 id="数据库完整性的定义">1. 数据库完整性的定义</h3>
<p><strong><em>数据库完整性</em></strong>（DB Integrity）是指DBMS应保证的DB的一种特性——在任何情况下的正确性、有效性和一致性。</p>
<ul>
<li><strong>广义完整性：</strong>语义完整性、并发控制、安全控制、DB故障恢复等；</li>
<li><strong>狭义完整性：</strong>专指<strong>语义完整性</strong>，DBMS通常有专门完整性管理机制与程序来处理语义完整性问题（本讲专指）</li>
</ul>
<p>关系模型中完整性要求：实体完整性、参照完整性、用户自定义完整性</p>
<p>数据库设计中，在E-R图/IDEF1X图中有很多完整性约束条件</p>
<h3 id="数据库完整性的问题">2. 数据库完整性的问题</h3>
<p>不正当的数据库操作，如输入错误、操作失误、程序处理失误等，会引发数据库完整性问题。</p>
<p><strong><em>数据库完整性管理的作用：</em></strong></p>
<ul>
<li>防止和避免数据库中不合理数据的出现</li>
<li>DBMS应尽可能地<strong>自动防止</strong>DB中<strong>语义不合理</strong>现象</li>
</ul>
<h3 id="保证数据库完整性">3. 保证数据库完整性</h3>
<p><img src="https://raw.githubusercontent.com/FuLucas/image/main/2022/image-20220313212002619.png" alt="image-20220313212002619" style="zoom:80%;"></p>
<ul>
<li>DBMS允许用户定义完整性约束规则（DDL）</li>
<li>当DB更新操作时，DBMS自动按照完整性约束条件进行检测</li>
</ul>
<p><strong><em>完整性约束条件（规则）的一般形式：Integrity Constraint ::= (O, P, A, R)</em></strong></p>
<p><strong><em>O：数据集合（约束对象），P：谓词条件（什么样的约束），A：触发条件（检查时候），R：响应动作（不满足时操作）</em></strong></p>
<h3 id="数据库完整性分类">4. 数据库完整性分类</h3>
<p><strong><em><u>按约束对象分类</u></em></strong></p>
<ul>
<li><strong>域完整性约束条件：</strong>施加某一列上，更新候选值是否接受约束条件，孤立</li>
<li><strong>关系完整性约束条件：</strong>施加于关系/Table上，更新候选元组或者是关系的若干元组的联系是否接受约束条件
<ul>
<li><img src="https://raw.githubusercontent.com/FuLucas/image/main/2022/image-20220313213219791.png" alt="image-20220313213219791" style="zoom:80%;"></li>
</ul></li>
</ul>
<p><strong><em><u>按约束来源分类</u></em></strong></p>
<ul>
<li><strong>结构约束：</strong>来自于<strong>模型</strong>的约束，如<strong>函数依赖约束、主键约束（实体完整性）、外键约束（参照完整性）</strong>，只关心数值相等与否、是否允许空值等；</li>
<li><strong>内容约束：</strong>来自于<strong>用户</strong>的约束，如<strong>用户自定义完整性</strong>，关心元组或属性的取值范围。</li>
</ul>
<p><strong><em><u>按约束状态分类</u></em></strong></p>
<ul>
<li><strong>静态约束：</strong>DB在任何时候都应该满足的约束，年龄在0到150之间——列（域）/表（关系）完整性约束</li>
<li><strong>动态约束：</strong>DB状态转变时应该满足的约束，如工资只升不降——触发器</li>
</ul>
<h2 id="二.-利用-sql-语言实现数据库的静态完整性">二. 利用 SQL 语言实现数据库的静态完整性</h2>
<p><img src="https://raw.githubusercontent.com/FuLucas/image/main/2022/image-20220314115117586.png" alt="image-20220314115117586" style="zoom:67%;"></p>
<h3 id="sql语言实现约束方法create-table">1. SQL语言实现约束方法——Create Table</h3>
<p><span class="math display"><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -3.281ex" xmlns="http://www.w3.org/2000/svg" width="60.667ex" height="7.692ex" role="img" focusable="false" viewBox="0 -1950 26814.7 3400"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mi" transform="translate(760,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1211,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(1677,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(2206,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(2567,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mtext" transform="translate(3033,0)"><path data-c="A0" d=""></path></g><g data-mml-node="mi" transform="translate(3283,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g><g data-mml-node="mi" transform="translate(3987,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(4516,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mi" transform="translate(4945,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path></g><g data-mml-node="mi" transform="translate(5243,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mtext" transform="translate(5709,0)"><path data-c="A0" d=""></path></g><g data-mml-node="mi" transform="translate(5959,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">三</text></g><g data-mml-node="mi" transform="translate(6859,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">种</text></g><g data-mml-node="mi" transform="translate(7759,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">功</text></g><g data-mml-node="mi" transform="translate(8659,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">能</text></g><g data-mml-node="mrow" transform="translate(9725.7,0)"><g data-mml-node="mo"><path data-c="23A7" d="M712 899L718 893V876V865Q718 854 704 846Q627 793 577 710T510 525Q510 524 509 521Q505 493 504 349Q504 345 504 334Q504 277 504 240Q504 -2 503 -4Q502 -8 494 -9T444 -10Q392 -10 390 -9Q387 -8 386 -5Q384 5 384 230Q384 262 384 312T383 382Q383 481 392 535T434 656Q510 806 664 892L677 899H712Z" transform="translate(0,1051)"></path><path data-c="23A9" d="M718 -893L712 -899H677L666 -893Q542 -825 468 -714T385 -476Q384 -466 384 -282Q384 3 385 5L389 9Q392 10 444 10Q486 10 494 9T503 4Q504 2 504 -239V-310V-366Q504 -470 508 -513T530 -609Q546 -657 569 -698T617 -767T661 -812T699 -843T717 -856T718 -876V-893Z" transform="translate(0,-551)"></path><path data-c="23A8" d="M389 1159Q391 1160 455 1160Q496 1160 498 1159Q501 1158 502 1155Q504 1145 504 924Q504 691 503 682Q494 549 425 439T243 259L229 250L243 241Q349 175 421 66T503 -182Q504 -191 504 -424Q504 -600 504 -629T499 -659H498Q496 -660 444 -660T390 -659Q387 -658 386 -655Q384 -645 384 -425V-282Q384 -176 377 -116T342 10Q325 54 301 92T255 155T214 196T183 222T171 232Q170 233 170 250T171 268Q171 269 191 284T240 331T300 407T354 524T383 679Q384 691 384 925Q384 1152 385 1155L389 1159Z" transform="translate(0,0)"></path><svg width="889" height="81" y="1060" x="0" viewBox="0 14.3 889 81"><path data-c="23AA" d="M384 150V266Q384 304 389 309Q391 310 455 310Q496 310 498 309Q502 308 503 298Q504 283 504 150Q504 32 504 12T499 -9H498Q496 -10 444 -10T390 -9Q386 -8 385 2Q384 17 384 150Z" transform="scale(1,0.398)"></path></svg><svg width="889" height="81" y="-641" x="0" viewBox="0 14.3 889 81"><path data-c="23AA" d="M384 150V266Q384 304 389 309Q391 310 455 310Q496 310 498 309Q502 308 503 298Q504 283 504 150Q504 32 504 12T499 -9H498Q496 -10 444 -10T390 -9Q386 -8 385 2Q384 17 384 150Z" transform="scale(1,0.398)"></path></svg></g><g data-mml-node="mtable" transform="translate(889,0)"><g data-mml-node="mtr" transform="translate(0,1200)"><g data-mml-node="mtd"><g data-mml-node="mi"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">定</text></g><g data-mml-node="mi" transform="translate(900,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">义</text></g><g data-mml-node="mi" transform="translate(1800,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">关</text></g><g data-mml-node="mi" transform="translate(2700,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">系</text></g><g data-mml-node="mi" transform="translate(3600,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">模</text></g><g data-mml-node="mi" transform="translate(4500,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">式</text></g></g></g><g data-mml-node="mtr" transform="translate(0,0)"><g data-mml-node="mtd"><g data-mml-node="mi"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">定</text></g><g data-mml-node="mi" transform="translate(900,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">义</text></g><g data-mml-node="mi" transform="translate(1800,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">完</text></g><g data-mml-node="mi" transform="translate(2700,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">整</text></g><g data-mml-node="mi" transform="translate(3600,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">性</text></g><g data-mml-node="mi" transform="translate(4500,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">约</text></g><g data-mml-node="mi" transform="translate(5400,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">束</text></g><g data-mml-node="mi" transform="translate(6300,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">（</text></g><g data-mml-node="mi" transform="translate(7200,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">列</text></g><g data-mml-node="mi" transform="translate(8100,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">完</text></g><g data-mml-node="mi" transform="translate(9000,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">整</text></g><g data-mml-node="mi" transform="translate(9900,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">性</text></g><g data-mml-node="mi" transform="translate(10800,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">和</text></g><g data-mml-node="mi" transform="translate(11700,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">表</text></g><g data-mml-node="mi" transform="translate(12600,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">完</text></g><g data-mml-node="mi" transform="translate(13500,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">整</text></g><g data-mml-node="mi" transform="translate(14400,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">性</text></g><g data-mml-node="mi" transform="translate(15300,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">）</text></g></g></g><g data-mml-node="mtr" transform="translate(0,-1200)"><g data-mml-node="mtd"><g data-mml-node="mi"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">定</text></g><g data-mml-node="mi" transform="translate(900,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">义</text></g><g data-mml-node="mi" transform="translate(1800,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">物</text></g><g data-mml-node="mi" transform="translate(2700,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">理</text></g><g data-mml-node="mi" transform="translate(3600,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">存</text></g><g data-mml-node="mi" transform="translate(4500,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">储</text></g><g data-mml-node="mi" transform="translate(5400,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">结</text></g><g data-mml-node="mi" transform="translate(6300,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">构</text></g></g></g></g><g data-mml-node="mo" transform="translate(17089,0) translate(0 250)"></g></g></g></g></svg></mjx-container></span></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tablename</span><br><span class="line">	((colname datatype [<span class="keyword">DEFAULT</span> {default_constant <span class="operator">|</span> <span class="keyword">NULL</span>}] [col_constr {col_constr...}]</span><br><span class="line">		<span class="operator">|</span>, table_constr</span><br><span class="line">	{, {colname datatype [<span class="keyword">DEFAULT</span> {default_constant <span class="operator">|</span> <span class="keyword">NULL</span>}] [col_constr {col_constr...}]</span><br><span class="line">		<span class="operator">|</span>, table_constr}</span><br><span class="line">	...});</span><br></pre></td></tr></tbody></table></figure>
<p>表约束前加逗号，而列约束通常和列的声明结对出现。</p>
<h4 id="col_constr-列约束">1.1 Col_constr 列约束</h4>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">{ <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line">    [<span class="keyword">Constraint</span> constraintname]</span><br><span class="line">    { <span class="keyword">Unique</span> <span class="operator">|</span> <span class="keyword">Primary</span> Key <span class="operator">|</span> <span class="keyword">Check</span> (Search_cond) </span><br><span class="line">    <span class="operator">|</span> <span class="keyword">References</span> tablename [(colname)] [<span class="keyword">On</span> <span class="keyword">Delete</span> {Cascade <span class="operator">|</span> <span class="keyword">Set</span> <span class="keyword">NULL</span>}]}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>References：引用另一表的列（外键）。如有ON DELETE CASCADE 或ON DELETE SET NULL语句，则删除被引用表的某列值v 时，要将本表该列值为v 的记录删除或列值更新为 null；缺省为无操作 。</p>
</blockquote>
<p><strong><em>例：</em></strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span> Student (Sid <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span>,</span><br><span class="line">                      Sname <span class="type">char</span>(<span class="number">10</span>),</span><br><span class="line">                      Ssex <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">constraint</span> ctssex <span class="keyword">check</span> (Ssex<span class="operator">=</span>‘男’ <span class="keyword">or</span>  Ssex<span class="operator">=</span>‘女’),</span><br><span class="line">                      Sage <span class="type">integer</span> <span class="keyword">check</span> (Sage<span class="operator">&gt;=</span><span class="number">1</span> <span class="keyword">and</span> Sage<span class="operator">&lt;</span><span class="number">150</span>),</span><br><span class="line">                      Did <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">references</span> Dept(Did) <span class="keyword">on</span> <span class="keyword">delete</span> cascade,</span><br><span class="line">                      Sclass <span class="type">char</span>(<span class="number">6</span>));</span><br></pre></td></tr></tbody></table></figure>
<h4 id="table_constr-表约束">1.2 Table_constr 表约束</h4>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Sonstraint constraintname]</span><br><span class="line">	{<span class="keyword">Unique</span> (colname {, colname ...})				<span class="operator">/</span><span class="operator">/</span> 几列组合是唯一的</span><br><span class="line">	<span class="operator">|</span> <span class="keyword">Primary</span> Key (colname {, colname ...})			<span class="operator">/</span><span class="operator">/</span> 几列联合为主键</span><br><span class="line">	<span class="operator">|</span> <span class="keyword">Check</span> (Search_Condition)</span><br><span class="line">	<span class="operator">|</span> <span class="keyword">Foreign</span> Key (colname {, colname ...})</span><br><span class="line">		<span class="keyword">References</span> tablename [colname {, colname ...}]</span><br><span class="line">		[<span class="keyword">On</span> <span class="keyword">Delete</span> Cascade]							<span class="operator">/</span><span class="operator">/</span> 引用另一表的若干列的值作为外键</span><br><span class="line">	}</span><br></pre></td></tr></tbody></table></figure>
<p><strong><em>例：</em></strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span> Course (Cid <span class="type">char</span>(<span class="number">3</span>) ,Cname <span class="type">char</span>(<span class="number">12</span>), Chours	<span class="type">integer</span>,</span><br><span class="line">                     Credit <span class="type">float</span>(<span class="number">1</span>) <span class="keyword">constraint</span> ctcredit <span class="keyword">check</span></span><br><span class="line">                     	(Credit <span class="operator">&gt;=</span><span class="number">0.0</span> <span class="keyword">and</span> Credit<span class="operator">&lt;=</span><span class="number">5.0</span> ),</span><br><span class="line">                     Tid <span class="type">char</span>(<span class="number">3</span>) <span class="keyword">references</span> Teacher(Tid) <span class="keyword">on</span> <span class="keyword">delete</span> cascade,</span><br><span class="line">                     <span class="keyword">primary</span> key(Cid),</span><br><span class="line">                     <span class="keyword">constraint</span>	ctcc <span class="keyword">check</span>(Chours<span class="operator">/</span>Credit <span class="operator">=</span> <span class="number">20</span>));</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span> SC (Sid <span class="type">char</span>(<span class="number">8</span>), Cid <span class="type">char</span>(<span class="number">3</span>), </span><br><span class="line">                 Score <span class="type">float</span>(<span class="number">1</span>) <span class="keyword">constraint</span> ctscore <span class="keyword">check</span> (Score<span class="operator">&gt;=</span><span class="number">0.0</span> <span class="keyword">and</span>  Score<span class="operator">&lt;=</span><span class="number">100.0</span>),</span><br><span class="line">                 forergn key (Sid) <span class="keyword">references</span> student(Sid) <span class="keyword">on</span> <span class="keyword">delete</span> cascade, </span><br><span class="line">                 forergn key (Cid) <span class="keyword">references</span> course(Cid) <span class="keyword">on</span> <span class="keyword">delete</span> cascade);</span><br></pre></td></tr></tbody></table></figure>
<h4 id="约束中的check">1.3 约束中的Check</h4>
<p><strong>check</strong> 中的条件可以是 <strong>Select-From-Where</strong> 内任何Where后的语句，<strong><em><u>包含子查询</u></em></strong>。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span> SC (Sid <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">check</span>( Sid <span class="keyword">in</span> (<span class="keyword">select</span> Sid <span class="keyword">from</span> student)),</span><br><span class="line">                 Cid <span class="type">char</span>(<span class="number">3</span>) <span class="keyword">check</span>( Cid <span class="keyword">in</span> (<span class="keyword">select</span> Cid <span class="keyword">from</span> course)) ,</span><br><span class="line">                 Score <span class="type">float</span>(<span class="number">1</span>) <span class="keyword">constraint</span> ctscore <span class="keyword">check</span> (Score<span class="operator">&gt;=</span><span class="number">0.0</span> <span class="keyword">and</span> Score<span class="operator">&lt;=</span><span class="number">100.0</span>));</span><br></pre></td></tr></tbody></table></figure>
<h4 id="撤销或追加约束alter-table">1.4 撤销或追加约束——Alter Table</h4>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tblname</span><br><span class="line">	[<span class="keyword">ADD</span> ({colname datatype	[<span class="keyword">DEFAULT</span> {default_const<span class="operator">|</span><span class="keyword">NULL</span>}]</span><br><span class="line">          [col_constr {col_constr...}] <span class="operator">|</span> ,table_constr}</span><br><span class="line">          {, colname...})]										<span class="operator">/</span><span class="operator">/</span> 新增列（不只是约束）</span><br><span class="line">    [<span class="keyword">DROP</span> {<span class="keyword">COLUMN</span> columnname <span class="operator">|</span> (columnname {, columnname...})}]</span><br><span class="line">    [MODIFY (columnname data<span class="operator">-</span>type</span><br><span class="line">             [<span class="keyword">DEFAULT</span> {default_const <span class="operator">|</span> <span class="keyword">NULL</span>}] [[<span class="keyword">NOT</span>] <span class="keyword">NULL</span>]</span><br><span class="line">             {, columnname...})]</span><br><span class="line">	[<span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> constr_name]</span><br><span class="line">	[<span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> constr_name]</span><br><span class="line">	[<span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY];</span><br></pre></td></tr></tbody></table></figure>
<p><strong><em>例：</em></strong> <strong>撤消SC表的ctscore约束</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> SC</span><br><span class="line">    <span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> ctscore;</span><br></pre></td></tr></tbody></table></figure>
<p><strong><em>例：</em></strong> <strong>在Oracle中增加新约束，需要通过修改列的定义来完成</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> SC</span><br><span class="line">    Modify (Score <span class="type">float</span>(<span class="number">1</span>) <span class="keyword">constraint</span> nctscore <span class="keyword">check</span> (Score<span class="operator">&gt;=</span><span class="number">0.0</span> <span class="keyword">and</span> Score<span class="operator">&lt;=</span><span class="number">150.0</span>));</span><br></pre></td></tr></tbody></table></figure>
<p>有的DBMS支持独立的追加约束。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> SC</span><br><span class="line">    <span class="keyword">Add</span>	<span class="keyword">Constraint</span> nctscore	<span class="keyword">check</span> (Score<span class="operator">&gt;=</span><span class="number">0.0</span> <span class="keyword">and</span> Score<span class="operator">&lt;=</span><span class="number">150.0</span>));</span><br></pre></td></tr></tbody></table></figure>
<h3 id="sql语言实现约束方法断言assertion">2. SQL语言实现约束方法——断言ASSERTION</h3>
<p>一个断言就是一个<strong>谓词表达式</strong>，它表达了希望数据库总能满足的条件；</p>
<p>表约束和列约束就是一些特殊的断言；</p>
<p>当一个断言创建后，系统将检测其有效性，并在<strong>每一次更新中测试</strong>更新是否违反该断言。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> ASSERTION <span class="operator">&lt;</span>assertion<span class="operator">-</span>name<span class="operator">&gt;</span> <span class="keyword">CHECK</span> <span class="operator">&lt;</span>predicate<span class="operator">&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<p><strong><em>例：</em></strong> <strong>每个分行的贷款总量必须小于该分行所有账户的余额总和</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> assertion sum_constraint <span class="keyword">check</span></span><br><span class="line">(<span class="keyword">not</span> <span class="keyword">exists</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> branch</span><br><span class="line">             <span class="keyword">where</span> (<span class="keyword">select</span> <span class="built_in">sum</span>(amount) <span class="keyword">from</span> loan</span><br><span class="line">                    <span class="keyword">where</span> loan.branch_name <span class="operator">=</span> branch.branch_name)</span><br><span class="line">             		<span class="operator">&gt;=</span> (<span class="keyword">select</span> <span class="built_in">sum</span>(balance) <span class="keyword">from</span> account </span><br><span class="line">                        <span class="keyword">where</span> account.branch_name <span class="operator">=</span> branch.branch_name)))</span><br></pre></td></tr></tbody></table></figure>
<h2 id="三.-利用-sql-语言实现数据库的动态完整性">三. 利用 SQL 语言实现数据库的动态完整性</h2>
<p><img src="https://raw.githubusercontent.com/FuLucas/image/main/2022/image-20220314115155077.png" alt="image-20220314115155077" style="zoom:67%;"></p>
<h3 id="实现数据库动态完整的方法触发器trigger">1. 实现数据库动态完整的方法——触发器Trigger</h3>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> trigger_name BEFORE <span class="operator">|</span> AFTER</span><br><span class="line">	{<span class="keyword">INSERT</span> <span class="operator">|</span> <span class="keyword">DELETE</span> <span class="operator">|</span> UPDATE [<span class="keyword">OF</span> colname {, colname...}]}</span><br><span class="line">	<span class="keyword">ON</span> tablename [<span class="keyword">REFERENCING</span> corr_name_def {, corr_name_def...}]</span><br><span class="line">	[<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="operator">|</span> <span class="keyword">FOR</span> <span class="keyword">EACH</span> STATEMENT]</span><br><span class="line">	[<span class="keyword">WHEN</span> (search_condition)]</span><br><span class="line">	{statement <span class="operator">|</span> <span class="keyword">BEGIN</span> <span class="keyword">ATOMIC</span> statement; {statement; ...} <span class="keyword">END</span>}</span><br></pre></td></tr></tbody></table></figure>
<p><strong><em>含义：</em></strong> 当某一事件发生时（Before|After），对该事件产生的结果（或是每一元组，或是整个操作的所有元组），检查条件 search_condition，如果满足条件，则执行后面的程序段。条件或程序段中引用的变量可用corr_name_def 来限定。</p>
<p>更新前的值和更新后的值（新旧元组/Table的命名），由corr_name_def来区分：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">	<span class="keyword">OLD</span> [<span class="type">ROW</span>] [<span class="keyword">AS</span>] old_row_corr_name</span><br><span class="line">	<span class="keyword">NEW</span> [<span class="type">ROW</span>] [<span class="keyword">AS</span>] new_row_corr_name</span><br><span class="line">	<span class="keyword">OLD</span> <span class="keyword">TABLE</span> [<span class="keyword">AS</span>] old_table_corr_name</span><br><span class="line">	<span class="keyword">OLD</span> <span class="keyword">TABLE</span> [<span class="keyword">AS</span>] new_table_corr_name</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><strong><em>例1：</em></strong> <strong>设计一个触发器当进行Teacher表更新元组时，使其工资只能升不能降</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> <span class="keyword">trigger</span> teacher_chgsal before update <span class="keyword">of</span> Salary <span class="keyword">on</span> Teacher</span><br><span class="line">    <span class="keyword">referencing</span> <span class="keyword">new</span> x, <span class="keyword">old</span> y</span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span> <span class="keyword">when</span> (x.Salary <span class="operator">&lt;</span> y.Salary)</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        raise_application_error(<span class="number">-20003</span>, <span class="string">'invalid salary on update'</span>);</span><br><span class="line">    <span class="keyword">end</span>;</span><br></pre></td></tr></tbody></table></figure>
<p><strong><em>例2：</em></strong> <strong>假设student(Sid, Sname, SumCourse)，SumCourse 为该同学已学习课程的门数，初始值为0，以后每选修一门都要对其增1。设计一个触发器自动完成上述功能。</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> sumc after <span class="keyword">insert</span> <span class="keyword">on</span> SC</span><br><span class="line">    <span class="keyword">referencing</span> <span class="keyword">new</span> <span class="type">row</span> newi</span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line">        <span class="keyword">begin</span></span><br><span class="line">            update student <span class="keyword">set</span> SumCourse <span class="operator">=</span> SumCourse <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">            <span class="keyword">where</span> Sid <span class="operator">=</span> newi.Sid;</span><br><span class="line">        <span class="keyword">end</span>;</span><br></pre></td></tr></tbody></table></figure>
<p><strong><em>例3：</em></strong> <strong>假设student(Sid, Sname, Sage, Ssex, Sclass) 中某一学生要变更其主码Sid的值，如使其原来的98030101变更为99030131，此时SC表中该同学已选课记录的Sid也需自动随其改变。设计一个触发器完成上述功能。</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> updSid after update <span class="keyword">of</span> Sid <span class="keyword">on</span> Student</span><br><span class="line">	<span class="keyword">referencing</span> <span class="keyword">old</span> oldi, <span class="keyword">new</span> newi</span><br><span class="line">	<span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line">		<span class="keyword">begin</span></span><br><span class="line">			update SC <span class="keyword">set</span> Sid<span class="operator">=</span>newi.Sid <span class="keyword">where</span> Sid<span class="operator">=</span>oldi.Sid;</span><br><span class="line">		<span class="keyword">end</span>;</span><br></pre></td></tr></tbody></table></figure>
<p><strong><em>例4：</em></strong> <strong>假设student(Sid, Sname, SumCourse), 当删除某一同学Sid时，该同学的所有选课也都要删除。设计一个触发器完成上述功能。</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> delSid after <span class="keyword">delete</span> <span class="keyword">on</span> Student</span><br><span class="line">	<span class="keyword">referencing</span> <span class="keyword">old</span> oldi</span><br><span class="line">	<span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line">		<span class="keyword">begin</span></span><br><span class="line">			<span class="keyword">delete</span> SC <span class="keyword">where</span> Sid<span class="operator">=</span>oldi.Sid;</span><br><span class="line">		<span class="keyword">end</span>;</span><br></pre></td></tr></tbody></table></figure>
<p><strong><em>例5：</em></strong> <strong>假设student(Sid, Sname, SumCourse)，当删除某一同学Sid时，该同学的所有选课中的Sid都要置为空值。设计一个触发器完成上述功能</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> delSid after <span class="keyword">delete</span> <span class="keyword">on</span> Student</span><br><span class="line">	<span class="keyword">referencing</span> <span class="keyword">old</span> oldi</span><br><span class="line">	<span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line">		<span class="keyword">begin</span></span><br><span class="line">			update SC <span class="keyword">set</span> Sid <span class="operator">=</span> <span class="keyword">NULL</span> <span class="keyword">where</span> Sid<span class="operator">=</span>oldi.Sid;</span><br><span class="line">		<span class="keyword">end</span>;</span><br></pre></td></tr></tbody></table></figure>
<p><strong><em>例6：</em></strong> <strong>假设Dept(Did, Dname, Dean)，而Dean一定是该系教师Teacher(Tid, Tname, Did, Salary)中工资最高的教师。设计一个触发器完成上述功能</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> upddean before update <span class="keyword">of</span> Dean <span class="keyword">on</span> Dept</span><br><span class="line">	<span class="keyword">referencing</span> <span class="keyword">old</span> oldi, <span class="keyword">new</span> newi</span><br><span class="line">	<span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span> <span class="keyword">when</span> (dean <span class="keyword">not</span> <span class="keyword">in</span></span><br><span class="line">		<span class="keyword">select</span> Tname <span class="keyword">from</span> Teacher <span class="keyword">where</span> Did<span class="operator">=</span>newi.Did <span class="keyword">and</span> salary <span class="operator">&gt;=</span> <span class="keyword">all</span></span><br><span class="line">			(<span class="keyword">select</span> salary <span class="keyword">from</span> Teacher <span class="keyword">where</span> Did<span class="operator">=</span>newi.id))</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">		raise_application_error(<span class="number">-20003</span>, <span class="string">'invalid Dean on update'</span>);</span><br><span class="line">	<span class="keyword">end</span>;</span><br></pre></td></tr></tbody></table></figure>
<h2 id="四.-数据库安全性的概念及分类">四. 数据库安全性的概念及分类</h2>
<h3 id="数据库安全性的概念">1. 数据库安全性的概念</h3>
<p><strong><em>数据库安全性：</em></strong>DBMS应该保证的数据库的一种特性（机制或手段），免受非法、非授权用户的使用、泄漏、更改或破坏。</p>
<p>涉及方面：法律伦理、公共制度/政策、安全策略等；</p>
<p>数据的安全级别：绝密（Top Secret）、机密（Secret）、可信（Confidential）、无分类（Unclassified）；</p>
<p>数据库系统DBS的安全级别：物理控制、网络控制、操作系统控制、DBMS控制。</p>
<p><strong><em><u>DBMS的安全机制：</u></em></strong></p>
<ul>
<li><strong><em>自主安全性机制：存取控制（Access Control）</em></strong>
<ul>
<li>权限在用户之间传递，用户自主管理数据库安全性</li>
</ul></li>
<li><strong><em>强制安全性机制</em></strong>
<ul>
<li>对数据和用户强制分类，不同用户访问不同类别的数据</li>
</ul></li>
<li>推断控制机制
<ul>
<li>防止通过公开信息/历史信息推断出其他/私密信息</li>
</ul></li>
<li>数据加密存储机制</li>
</ul>
<h3 id="数据库的自主安全机制">2. 数据库的自主安全机制</h3>
<p>自主安全性通过<strong>授权机制</strong>来实现。DBA处获得账户，授予该账户一定权限 <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.054ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.242ex" role="img" focusable="false" viewBox="0 -525 1000 549"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="21D2" d="M580 514Q580 525 596 525Q601 525 604 525T609 525T613 524T615 523T617 520T619 517T622 512Q659 438 720 381T831 300T927 263Q944 258 944 250T935 239T898 228T840 204Q696 134 622 -12Q618 -21 615 -22T600 -24Q580 -24 580 -17Q580 -13 585 0Q620 69 671 123L681 133H70Q56 140 56 153Q56 168 72 173H725L735 181Q774 211 852 250Q851 251 834 259T789 283T735 319L725 327H72Q56 332 56 347Q56 360 70 367H681L671 377Q638 412 609 458T580 514Z"></path></g></g></g></svg></mjx-container></span> 依据权限操作数据库 <span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.054ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.242ex" role="img" focusable="false" viewBox="0 -525 1000 549"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="21D2" d="M580 514Q580 525 596 525Q601 525 604 525T609 525T613 524T615 523T617 520T619 517T622 512Q659 438 720 381T831 300T927 263Q944 258 944 250T935 239T898 228T840 204Q696 134 622 -12Q618 -21 615 -22T600 -24Q580 -24 580 -17Q580 -13 585 0Q620 69 671 123L681 133H70Q56 140 56 153Q56 168 72 173H725L735 181Q774 211 852 250Q851 251 834 259T789 283T735 319L725 327H72Q56 332 56 347Q56 360 70 367H681L671 377Q638 412 609 458T580 514Z"></path></g></g></g></svg></mjx-container></span> 权限转授</p>
<p>DBMS实现自主安全性：用户定义安全性控制规则（DCL）<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.054ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.242ex" role="img" focusable="false" viewBox="0 -525 1000 549"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="21D2" d="M580 514Q580 525 596 525Q601 525 604 525T609 525T613 524T615 523T617 520T619 517T622 512Q659 438 720 381T831 300T927 263Q944 258 944 250T935 239T898 228T840 204Q696 134 622 -12Q618 -21 615 -22T600 -24Q580 -24 580 -17Q580 -13 585 0Q620 69 671 123L681 133H70Q56 140 56 153Q56 168 72 173H725L735 181Q774 211 852 250Q851 251 834 259T789 283T735 319L725 327H72Q56 332 56 347Q56 360 70 367H681L671 377Q638 412 609 458T580 514Z"></path></g></g></g></svg></mjx-container></span> DBMS按照规则检查</p>
<h4 id="数据库自主安全性访问规则">2.1 数据库自主安全性访问规则</h4>
<p><strong><em>Access Rule ::= (S, O, t, P)</em></strong> ，表示：S用户对O这个访问对象，在满足P的条件下，拥有t这个权利</p>
<ul>
<li><strong><em>S：</em></strong>请求主题（用户）</li>
<li><strong><em>O：</em></strong>访问对象（属性/字段、记录/元组、关系、数据库等不同粒度）</li>
<li><strong><em>t：</em></strong>访问权限（创建、增、删、改、查等）</li>
<li><strong><em>P：</em></strong>谓词（拥有权限需要满足的条件）</li>
</ul>
<h4 id="两种自主安全性实现方法">2.2 两种自主安全性实现方法</h4>
<figure>
<img src="https://raw.githubusercontent.com/FuLucas/image/main/2022/image-20220315194723435.png" alt="image-20220315194723435"><figcaption aria-hidden="true">image-20220315194723435</figcaption>
</figure>
<p><strong><em><u>存储矩阵</u></em></strong></p>
<figure>
<img src="https://raw.githubusercontent.com/FuLucas/image/main/2022/image-20220315195027379.png" alt="image-20220315195027379"><figcaption aria-hidden="true">image-20220315195027379</figcaption>
</figure>
<p>问题在于不能反映条件，即谓词P</p>
<p><strong><em><u>视图</u></em></strong></p>
<p>视图是安全性控制的重要手段</p>
<ul>
<li>通过视图可以限制用户对关系中某些数据项的存取</li>
<li>通过视图可将数据访问对象与谓词结合起来，限制用户对关系中某些元组的存取</li>
<li>用户定义视图后，视图便成为一新的数据对象，参与到存储矩阵与能力表中进行描述</li>
</ul>
<p>视图的形式可以<strong>反映出谓词P</strong></p>
<h2 id="五.-利用-sql-语言实现数据库的自主安全性">五. 利用 SQL 语言实现数据库的自主安全性</h2>
<h3 id="sql语言的用户与权利">1. SQL语言的用户与权利</h3>
<p>数据库安全性控制是属于DCL范畴</p>
<p><strong><em>超级用户（DBA）<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.054ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.242ex" role="img" focusable="false" viewBox="0 -525 1000 549"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="21D2" d="M580 514Q580 525 596 525Q601 525 604 525T609 525T613 524T615 523T617 520T619 517T622 512Q659 438 720 381T831 300T927 263Q944 258 944 250T935 239T898 228T840 204Q696 134 622 -12Q618 -21 615 -22T600 -24Q580 -24 580 -17Q580 -13 585 0Q620 69 671 123L681 133H70Q56 140 56 153Q56 168 72 173H725L735 181Q774 211 852 250Q851 251 834 259T789 283T735 319L725 327H72Q56 332 56 347Q56 360 70 367H681L671 377Q638 412 609 458T580 514Z"></path></g></g></g></svg></mjx-container></span> 账户级别（程序员用户）<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.054ex" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.242ex" role="img" focusable="false" viewBox="0 -525 1000 549"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="21D2" d="M580 514Q580 525 596 525Q601 525 604 525T609 525T613 524T615 523T617 520T619 517T622 512Q659 438 720 381T831 300T927 263Q944 258 944 250T935 239T898 228T840 204Q696 134 622 -12Q618 -21 615 -22T600 -24Q580 -24 580 -17Q580 -13 585 0Q620 69 671 123L681 133H70Q56 140 56 153Q56 168 72 173H725L735 181Q774 211 852 250Q851 251 834 259T789 283T735 319L725 327H72Q56 332 56 347Q56 360 70 367H681L671 377Q638 412 609 458T580 514Z"></path></g></g></g></svg></mjx-container></span> 关系级别（普通用户）</em></strong></p>
<ul>
<li><strong>（级别一）Select：读</strong></li>
<li><strong>（级别二）Modify：更新</strong>
<ul>
<li>Insert：插入</li>
<li>Update：更新</li>
<li>Delete：删除</li>
</ul></li>
<li><strong>（级别三）Create：创建</strong>（表空间、模式、表、索引、视图等）
<ul>
<li>Create：创建</li>
<li>Alter：更新</li>
<li>Drop：删除</li>
</ul></li>
</ul>
<p>级别高的权利<strong>自动包含</strong>级别低的权利</p>
<h3 id="dcl命令">2. DCL命令</h3>
<h4 id="授权命令">2.1 授权命令</h4>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> {<span class="keyword">all</span> PRIVILEGES <span class="operator">|</span> privilege {,privilege...}}</span><br><span class="line"><span class="keyword">ON</span> [<span class="keyword">TABLE</span>] tablename <span class="operator">|</span> viewname</span><br><span class="line"><span class="keyword">TO</span> {public <span class="operator">|</span> <span class="keyword">user</span><span class="operator">-</span>id {, <span class="keyword">user</span><span class="operator">-</span>id...}}</span><br><span class="line">[<span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION];</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>privilege 是权利：<strong>SELECT | INSERT | UPDATE | DELETE | ALL PRIVILEDGES</strong></li>
<li>public 所有有效账户授权，user-id 某一个用户账户</li>
<li>WITH GRANT OPTION：允许被授权者传播这些权利</li>
</ul>
<p><strong><em>例：</em></strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Grant</span> <span class="keyword">All</span> Priviledges <span class="keyword">ON</span> Employee <span class="keyword">TO</span> Emp2001;</span><br><span class="line"><span class="keyword">Grant</span> <span class="keyword">SELECT</span> <span class="keyword">ON</span> EmpV2 <span class="keyword">TO</span> Emp5001;</span><br></pre></td></tr></tbody></table></figure>
<h4 id="收回授权命令">2.2 收回授权命令</h4>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> {<span class="keyword">all</span> privilEges <span class="operator">|</span> priv {, priv...}}</span><br><span class="line"><span class="keyword">ON</span> tablename <span class="operator">|</span> viewname</span><br><span class="line"><span class="keyword">FROM</span> {public <span class="operator">|</span> <span class="keyword">user</span> {, user...}};</span><br></pre></td></tr></tbody></table></figure>
<h2 id="六.-安全性控制的其他简介">六. 安全性控制的其他简介</h2>
<h3 id="自主安全性的授权过程及其问题">1. 自主安全性的授权过程及其问题</h3>
<p><strong><em><u>授权过程</u></em></strong></p>
<ul>
<li>第一步：DBA创建DB，为每一个用户创建一个账户</li>
<li>第二步：DBA授予某用户<strong>账户级别</strong>的权利</li>
<li>第三步：具有账户级别的用户可以<strong>创建基本表或视图</strong>，也自动成为该表/视图的<strong>属主账户</strong>，拥有该表或该视图的<strong>所有访问权利</strong></li>
<li>第四步：拥有属主账户的用户可以将一部分权利授予另外的用户，该用户也可将权利进一步授权给其他的用户</li>
</ul>
<p><strong><em><u>授权的传播范围</u></em></strong></p>
<ul>
<li><strong>水平传播数量：</strong>是授权者的再授权用户数目（广度）</li>
<li><strong>垂直传播数量：</strong>被授权者再传播给另一个被授权者（深度）</li>
</ul>
<h3 id="强制安全性机制">2. 强制安全性机制</h3>
<p>数据对象和用户进行安全性分级</p>
<blockquote>
<p>绝密（Top Secret）、机密（Secret）、可信（Confidential）、无分类（Unclassified）</p>
</blockquote>
<ul>
<li>用户 S，不能<strong>读</strong>取数据对象 O，除非 <strong>Level(S)&gt;=Level(O)</strong></li>
<li>用户 S，不能<strong>写</strong>数据对象 O， 除非 <strong>Level(S)&lt;=Level(O)</strong></li>
</ul>
<p>通过扩展关系模式来实现强制安全性机制（多级关系）</p>
<p><span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="49.524ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 21889.8 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g><g data-mml-node="mo" transform="translate(759,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msub" transform="translate(1148,0)"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mn" transform="translate(783,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(2612.3,0)"><path data-c="3A" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path></g><g data-mml-node="msub" transform="translate(3168.1,0)"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="mn" transform="translate(861,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(4432.7,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msub" transform="translate(4877.3,0)"><g data-mml-node="mi"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mn" transform="translate(748,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(6028.9,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mtext" transform="translate(6473.5,0)"><path data-c="A0" d=""></path></g><g data-mml-node="msub" transform="translate(6723.5,0)"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mn" transform="translate(783,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(8187.9,0)"><path data-c="3A" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path></g><g data-mml-node="msub" transform="translate(8743.7,0)"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="mn" transform="translate(861,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(10008.2,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msub" transform="translate(10452.9,0)"><g data-mml-node="mi"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mn" transform="translate(748,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(11604.4,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mtext" transform="translate(12049.1,0)"><path data-c="A0" d=""></path></g><g data-mml-node="mo" transform="translate(12465.8,0)"><path data-c="2026" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60ZM525 60Q525 84 542 102T585 120Q609 120 627 104T646 61Q646 36 629 18T586 0T543 17T525 60ZM972 60Q972 84 989 102T1032 120Q1056 120 1074 104T1093 61Q1093 36 1076 18T1033 0T990 17T972 60Z"></path></g><g data-mml-node="mo" transform="translate(13804.4,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msub" transform="translate(14249.1,0)"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mi" transform="translate(783,-150) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(15784.1,0)"><path data-c="3A" d="M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path></g><g data-mml-node="msub" transform="translate(16339.9,0)"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g><g data-mml-node="mi" transform="translate(861,-150) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(17675.2,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msub" transform="translate(18119.8,0)"><g data-mml-node="mi"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mi" transform="translate(748,-150) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(19342.1,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mtext" transform="translate(19786.8,0)"><path data-c="A0" d=""></path></g><g data-mml-node="mi" transform="translate(20036.8,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g><g data-mml-node="mi" transform="translate(20740.8,0)"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mo" transform="translate(21500.8,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container></span></p>
<p><img src="https://raw.githubusercontent.com/FuLucas/image/main/2022/image-20220315202716341.png" alt="image-20220315202716341" style="zoom: 80%;"></p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2022/04/28/Database%20System/09-%E5%B5%8C%E5%85%A5%E5%BC%8FSQL%E8%AF%AD%E8%A8%80%E4%B9%8B%E5%9F%BA%E6%9C%AC%E6%8A%80%E5%B7%A7/" title="嵌入式SQL语言之基本技巧"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: 嵌入式SQL语言之基本技巧</span></a><a class="button is-default" href="/2022/04/25/Database%20System/07-SQL%E8%AF%AD%E8%A8%80%E4%B9%8B%E6%9F%A5%E8%AF%A2%E4%B8%8E%E8%A7%86%E5%9B%BE/" title="SQL语言之查询与视图"><span class="has-text-weight-semibold">Next: SQL语言之查询与视图</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="Haojen/Claudia-theme-blog" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com//"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/FuLucas"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com//"><i class="iconfont icon-ins"></i></a><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com//"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> FuLucas 2022</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>